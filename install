#!/usr/bin/env bash
# _____             _                 _____ _____ 
#|   __|___ ___ ___| |_ ___ _ _ _____|     |   __|
#|__   | . | -_|  _|  _|  _| | |     |  |  |__   |
#|_____|  _|___|___|_| |_| |___|_|_|_|_____|_____|
#      |_|   
# SpectrumOS - Embrace the Chromatic Symphony!
# By: gibranlp <thisdoesnotwork@gibranlp.dev>
# MIT licence 
# 
#

# Install bin scripts
function bin(){
    cd ~/.local/bin
    rm -rfv *
    mkdir -p ~/.local/bin
    cp -ruv ~/dots/bin/* ~/.local/bin
    if [ "$(ls -A ~/.local/bin)" ]; then
        chmod +x ~/.local/bin/*
    fi
}

# Qtile files
function install_qtile(){
    mkdir -pv ~/.config/qtile
    cd ~/.config/qtile
    rm -rfv *
    cp -rv ~/dots/qtile/* ~/.config/qtile/
}

# Alacritty

function install_alacritty(){
    # Alacritty
    mkdir -p ~/.config/alacritty
    cp -v ~/dots/alacritty/alacritty.toml ~/.config/alacritty
}

# Copy ZSH Files
function install_zsh(){
    cp -v ~/dots/.zshrc ~/
    cp -v ~/dots/oh-my-zsh/* ~/.oh-my-zsh/themes/
}

# Copy Picom Files

function install_picom(){
    # Picom
    mkdir -p ~/.config/picom
    cp -v ~/dots/picom/picom.conf ~/.config/picom
}

# Copy Depenendencies
function install_dependencies(){
    mkdir -pv ~/.cache/wal
    # Shortcuts
    cp -v .shortcuts ~/

    # Logo Cli
    cp -v ~/dots/logo_cli.png ~/
}

# Copy Wallpapers
function install_wallpapers(){
    sudo mkdir -pv /usr/local/backgrounds
    sudo chown -R $USER:$USER /usr/local/backgrounds
    sudo cp -v ~/dots/Wallpapers/wall1.png /usr/local/backgrounds/background.png
    cp -v ~/dots/Wallpapers/* ~/Pictures/Wallpapers
}

# Copy Dunst Files

function install_dunst(){
    mkdir -pv ~/.config/wal/templates
    mkdir -pv ~/.config/dunst
    cp -v ~/dots/dunst/dunstrc ~/.config/wal/templates
}

# Function to install Lightdm
function install_lightdm(){
    sudo pacman -S lightdm lightdm-webkit2-greeter --no-confirm
    sudo cp -v ~/dots/lightdm/lightdm.conf /etc/lightdm/
    sudo cp -v ~/dots/lightdm/lightdm-webkit2-greeter.conf /etc/lightdm/
    sudo cp -v ~/dots/lightdm/lightdm-gtk-greeter.conf /etc/lightdm
    sudo cp -rv ~/dots/lightdm/theme/SpectrumOS /usr/share/lightdm-webkit/themes/
    sudo cp -v ~/.cache/wal/colors.css /usr/share/lightdm-webkit/themes/SpectrumOS/css/
    sudo mkdir -p /usr/local/themes
    sudo cp -rv ~/.local/share/themes/FlatColor /usr/local/themes
    sudo chown -R $USER:$USER /usr/local/themes/FlatColor
    sudo ln -s /usr/local/themes/FlatColor /usr/share/themes/FlatColor
}

# Function to install Rofi files
function install_rofi(){
    mdir -pv ~/.config/wal/templates
    mkdir -pv ~/.config/rofi
    cd ~/.config/rofi
    rm -rfv *
    cp -v ~/dots/rofi/SOS_Colors.rasi ~/.config/wal/templates
    cp -v ~/dots/rofi/*.rasi ~/.config/rofi/
}

# Function to display usage information
function usage() {
    echo "Usage: $0 [--bin] [--qtile] [--alacritty] [--zsh] [--picom] [--dependencies] [--wallpapers] [--lightdm] [--rofi] [--dunst]"
    exit 1
}



# Main script execution
if [ $# -eq 0 ]; then
    usage
fi

for arg in "$@"; do
    case $arg in
        --bin)
            bin
            ;;
        --qtile)
            install_qtile
            ;;
        --alacritty)
            install_alacritty
            ;;
        --zsh)
            install_zsh
            ;;
        --picom)
            install_picom
            ;;
        --dependencies)
            install_dependencies
            ;;
        --wallpapers)
            install_wallpapers
            ;;
        --lightdm)
            install_lightdm
            ;;
        --rofi)
            install_rofi
            ;;
        --dunst)
            install_dunst
            ;;
        *)
            echo "Invalid option: $arg"
            usage
            ;;
    esac
done
